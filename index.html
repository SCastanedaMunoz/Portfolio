<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>My Portfolio</title>

         <!-- JQuery -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

        <!-- Compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">

        <!-- Compiled and minified JavaScript -->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

        <!-- Materialize Icons -->
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

        <!-- Font Awesome CDN -->
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

        <link rel="stylesheet" href="css/general.css">
    </head>

    <body>
        <script>
            $(document).ready(function(){
                const navBarContents = {
                    index : { 
                        type:"page",
                        link:"index.html",
                        text:"About"
                    },
                    webDevProjects : {
                        type:"page",
                        link:"webProjects.html",
                        text:"Web Dev"
                    },
                    gameDevProjects : {
                        type:"page",
                        link:"gameDevProjects.html",
                        text:"Game Dev"
                    },
                    gitHub : {
                        type:"icon",
                        icon:"assets/icons/GitHub.png",
                        link:"https://github.com/SCastanedaMunoz",
                        text:"GitHub"
                    },
                    linkedIn : {
                        type:"icon",
                        icon:"assets/icons/LinkedIn.png",
                        link:"https://www.linkedin.com/in/santiagocastanedamunoz",
                        text:"LinkedIn"
                    }
                }

                var navHolder = $("<nav>");
                var navWrapper = $("<div>");

                $(navWrapper).addClass("nav-wrapper");

                var brandLogo = $("<a>");
                $(brandLogo).attr("href", "#!");
                $(brandLogo).addClass("brand-logo");
                $(brandLogo).text("Santiago Castaneda Munoz");
                
                var sideNavTarget = $("<a>");
                $(sideNavTarget).attr("href", "#");
                $(sideNavTarget).attr("data-target", "mobile-sidenav");
                $(sideNavTarget).addClass("sidenav-trigger");

                var hamburgerIcon = $("<i>");
                $(hamburgerIcon).addClass("material-icons");
                $(hamburgerIcon).text("menu");

                $(sideNavTarget).append(hamburgerIcon);

                var navBarContentsList = $("<ul>");
                $(navBarContentsList).addClass("right hide-on-med-and-down");

                var sideBarContentsList = $("<ul>");
                $(sideBarContentsList).addClass("sidenav");
                $(sideBarContentsList).attr("id", "mobile-sidenav");

                fillNavElement(navBarContentsList, "nav");
                fillNavElement(sideBarContentsList, "side");

                $(navWrapper).append(brandLogo, sideNavTarget, navBarContentsList);
                $(navHolder).append(navWrapper, sideBarContentsList);

                $("body").prepend(navHolder);

                function fillNavElement(toAppend, location) {
                    var path = window.location.pathname;
                    var currentPage = path.split("/").pop();
                    $.each(navBarContents, function( key, value ) {
                        var contentItem = $("<li>");
                        switch(value.type) {
                            case "page":
                                var link = $("<a>");
                                $(link).attr("href", value.link);
                                $(link).text(value.text);
                                if(value.link == currentPage)
                                    $(contentItem).addClass("active");
                                $(contentItem).append(link);
                                break;
                            case "icon":
                                var link = $("<a>");
                                $(link).attr("href", value.link);
                                $(link).attr("target", "_blank");
                                var icon = $("<img>");
                                $(icon).attr("src", value.icon);
                                $(icon).attr("alt", `${value.text} Social`);
                                $(icon).addClass(`social-icon-${location}`);
                                $(link).append(icon);
                                $(contentItem).append(link);
                                break;
                        }
                        $(toAppend).append(contentItem);
                    });
                }

                $('.sidenav').sidenav();
            });
        </script>
    </body>
</html>